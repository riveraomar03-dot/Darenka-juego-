<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Juego para Darenka ðŸ’–</title>

<style>
  body{
    margin:0; min-height:100vh; display:grid; place-items:center;
    font-family: Arial, Helvetica, sans-serif;
    background: linear-gradient(135deg,#ff9a9e,#fad0c4);
  }
  .card{
    width:min(860px,96vw);
    background: rgba(255,255,255,.96);
    border-radius:22px;
    padding:28px;
    text-align:center;
    box-shadow:0 12px 35px rgba(0,0,0,.18);
    position:relative; overflow:hidden;
  }
  h1{margin:0 0 10px;font-size:34px}
  p{font-size:18px; line-height:1.4}
  .small{font-size:14px; opacity:.7}
  .btns{display:flex;gap:12px;justify-content:center;flex-wrap:wrap;margin-top:18px}
  button{
    border:0;border-radius:14px;padding:14px 20px;
    font-size:16px;font-weight:800;cursor:pointer;
    box-shadow:0 8px 18px rgba(0,0,0,.16);
  }
  .primary{background:#111;color:#fff}
  .ghost{background:#fff;color:#111}
  .final{font-size:36px;margin-top:10px}
  .message{
    text-align:left;
    background:rgba(0,0,0,.05);
    padding:18px;
    border-radius:16px;
    margin-top:18px;
  }
  .message p{font-size:17px; margin:10px 0}
  .heart{
    position:absolute;bottom:-20px;font-size:24px;
    animation: floatUp 3.4s ease forwards;pointer-events:none;
  }
  @keyframes floatUp{
    0%{transform:translateY(0) scale(.8);opacity:0}
    15%{opacity:1}
    100%{transform:translateY(-600px) scale(1.8);opacity:0}
  }
</style>
</head>

<body>
<div class="card" id="card">
  <h1 id="title">Hola Darenka ðŸ˜Š</h1>
  <p id="text">Antes de la sorpresaâ€¦ Â¿jugamos un poquito?</p>

  <div class="btns" id="btns">
    <button class="primary" id="musicBtn">Activar mÃºsica ðŸ’—</button>
    <button class="ghost" id="startBtn">Empezar ðŸŽ®</button>
  </div>

  <p class="small" id="hint">Tip: toca una vez la pantalla y luego activa la mÃºsica ðŸ’—</p>

  <audio id="bgm" src="music.mp3" loop preload="auto" playsinline></audio>
</div>

<script>
  const card = document.getElementById("card");
  const title = document.getElementById("title");
  const text  = document.getElementById("text");
  const btns  = document.getElementById("btns");
  const hint  = document.getElementById("hint");
  const bgm   = document.getElementById("bgm");

  // ðŸ”“ desbloqueo de audio
  let audioUnlocked = false;
  function unlockAudio(){
    if (audioUnlocked) return;
    bgm.muted = false;
    bgm.volume = 1.0;
    bgm.play().then(()=>{
      bgm.pause();
      bgm.currentTime = 0;
      audioUnlocked = true;
    }).catch(()=>{});
  }
  document.addEventListener("click", unlockAudio, { once:true });
  document.addEventListener("touchstart", unlockAudio, { once:true });

  // ðŸ’– corazones
  function hearts(n=18){
    for(let i=0;i<n;i++){
      const h=document.createElement("div");
      h.className="heart";
      h.textContent=["ðŸ’–","ðŸ’—","ðŸ’˜","ðŸ’","ðŸ’ž"][Math.floor(Math.random()*5)];
      h.style.left=(6+Math.random()*88)+"%";
      h.style.fontSize=(18+Math.random()*22)+"px";
      card.appendChild(h);
      setTimeout(()=>h.remove(),3600);
    }
  }

  // ðŸŽ® pasos
  const steps = [
    { t:"Nivel 1 ðŸ’•", p:"Elige una puerta:", c:[
      { t:"Puerta A ðŸšª", n:1 }, { t:"Puerta B ðŸšª", n:1 }
    ]},
    { t:"Nivel 2 âœ¨", p:"Elige un plan:", c:[
      { t:"CafÃ© â˜•", n:2 }, { t:"Helado ðŸ¦", n:2 }, { t:"Cine ðŸŽ¬", n:2 }
    ]},
    { t:"Trivia Deftones ðŸŽ¶", p:"Â¿QuiÃ©n es el vocalista de Deftones?", c:[
      { t:"Chino Moreno ðŸ–¤", n:3 }, { t:"El de la voz intensa ðŸ˜®â€ðŸ’¨", n:3 }
    ]},
    { t:"Trivia Deftones ðŸŽ§", p:"Â¿CuÃ¡l de estos Ã¡lbumes es de Deftones?", c:[
      { t:"White Pony ðŸ¤ðŸŽ", n:4 }, { t:"El que se siente como abrazo ðŸŒ§ï¸", n:4 }
    ]},
    { t:"MisiÃ³n romÃ¡ntica ðŸ’ž", p:"Completa la frase: Contigo, lo simple se sienteâ€¦", c:[
      { t:"Especial âœ¨", n:5 }, { t:"Seguro ðŸ«¶", n:5 }, { t:"Como hogar ðŸ¡", n:5 }
    ]},
    { final:true }
  ];

  function musicToggle(i){
    const b = document.createElement("button");
    b.className = "ghost";
    b.textContent = bgm.paused ? "ðŸ”Š MÃºsica ON" : "ðŸ”‡ MÃºsica OFF";
    b.onclick = () => {
      if (bgm.paused) bgm.play(); else bgm.pause();
      go(i);
    };
    return b;
  }

  function go(i){
    const s = steps[i];
    btns.innerHTML = "";

    if (s.final){
      title.textContent = "ðŸ’–";
      hint.textContent = "";
      text.innerHTML = `
        <div class="final">Darenka, Â¿quieres ser mi novia?</div>

        <div class="message">
          <p><strong>Darenka,</strong></p>

          <p>
            no hice este juego para impresionarte,<br>
            lo hice porque contigo me nacen ganas de crear,<br>
            de cuidarte, de elegirte con calma y con intenciÃ³n.
          </p>

          <p>
            Me gusta cÃ³mo se siente hablar contigo,<br>
            cÃ³mo la mÃºsica suena distinto cuando estÃ¡s cerca,<br>
            y cÃ³mo lo simple se vuelve especial si es contigo.
          </p>

          <p>
            No prometo perfecciÃ³n,<br>
            pero sÃ­ presencia, respeto y ganas reales de construir algo bonito.
          </p>

          <p><strong>Si me dejas, quiero ser tu lugar seguro.</strong></p>
        </div>
      `;

      const yes = document.createElement("button");
      yes.className = "primary";
      yes.textContent = "SÃ­ ðŸ’•";
      yes.onclick = () => hearts(30);

      const no = document.createElement("button");
      no.className = "ghost";
      no.textContent = "No ðŸ™ˆ";
      no.onmouseover = () => {
        no.style.transform = "translate(" + (Math.random()*160 - 80) + "px)";
      };

      btns.appendChild(musicToggle(i));
      btns.appendChild(yes);
      btns.appendChild(no);
      hearts(22);
      return;
    }

    title.textContent = s.t;
    text.textContent = s.p;
    hint.textContent = "";

    btns.appendChild(musicToggle(i));

    s.c.forEach(opt=>{
      const b = document.createElement("button");
      b.className = "primary";
      b.textContent = opt.t;
      b.onclick = () => { hearts(8); go(opt.n); };
      btns.appendChild(b);
    });
  }

  // ðŸŽµ botÃ³n mÃºsica principal
  document.getElementById("musicBtn").onclick = async () => {
    if(!audioUnlocked){
      alert("Toca una vez la pantalla y vuelve a presionar ðŸ’—");
      return;
    }
    try{
      bgm.currentTime = 0;
      await bgm.play();
      hearts(10);
    }catch(e){
      alert("Sube el volumen o revisa que la pestaÃ±a no estÃ© en silencio ðŸ”Š");
    }
  };

  document.getElementById("startBtn").onclick = () => {
    hearts(8);
    go(0);
  };
</script>
</body>
</html>
